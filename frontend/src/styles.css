@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Status colors are invariant across themes */
    --status-live: 20 184 166; /* teal-500 */
    --status-draft: 14 165 233; /* sky-500 */
    --status-done: 113 113 122; /* zinc-500 */
    /* Shared UI accents (fixed across themes) */
    --delta-up: 20 184 166; /* teal-500 */
    --delta-down: 244 63 94; /* rose-500 */
    --live-indicator: 239 68 68; /* red-500 */
    /* Global page padding (tweak here for all pages) */
    --page-pad-x: 16px;
    /* App background (set per theme via --theme-app-bg) */
    --app-bg: var(--theme-app-bg, 24 24 27);
  }

  body {
    background-color: rgb(var(--app-bg));
    @apply text-zinc-100;
  }
}

@media (min-width: 640px) {
  :root {
    --page-pad-x: 20px;
  }
}

@media (min-width: 1024px) {
  :root {
    --page-pad-x: 24px;
  }
}

.accent { color: rgb(var(--accent)); }

@layer components {
  .surface-border { @apply border border-zinc-800; }
  .surface-border-2 { @apply border-2 border-zinc-800; }
  .surface-bg { @apply bg-zinc-950; }
  .surface-bg-subtle { @apply bg-zinc-900/10; }
  .surface-bg-subtle-2 { @apply bg-zinc-950/10; }
  .surface-bg-chip { @apply bg-zinc-950/60; }
  .surface-bg-soft { @apply bg-zinc-900/30; }

  .text-default { @apply text-zinc-100; }
  .text-soft { @apply text-zinc-200; }
  .text-muted { @apply text-zinc-400; }
  .text-subtle { @apply text-zinc-500; }
  .text-faint { @apply text-zinc-600; }

  .hover-surface { @apply hover:bg-zinc-900/50; }
  .hover-surface-strong { @apply hover:bg-zinc-900/60; }
  .nav-shell { @apply border-b border-zinc-800 surface-bg; }
  .nav-link { @apply rounded-xl px-3 py-2 text-sm hover-surface-strong; }
  .nav-link-active { @apply bg-zinc-900; }

  .surface-card { @apply rounded-2xl surface-border-2 surface-bg; }
  .surface-panel { @apply rounded-xl surface-border-2 surface-bg; }
  .surface-muted { @apply surface-bg-chip; }

  .modal-shell { @apply rounded-2xl surface-border-2 surface-bg p-4 shadow-xl; }
  .sheet-shell { @apply surface-border-2 surface-bg p-4 shadow-xl; }
  .overlay-scrim { @apply absolute inset-0 bg-black/60; }
  .icon-button { @apply rounded-lg px-2 py-1 text-sm text-muted hover:bg-zinc-900; }

  .input-label { @apply mb-1 text-xs text-muted; }
  .input-hint { @apply mt-1 text-xs text-subtle; }
  .input-field { @apply w-full rounded-xl surface-border surface-bg px-3 py-2 text-base sm:text-sm outline-none focus:border-zinc-600 text-default; }
  .select-field { @apply w-full rounded-xl surface-border surface-bg px-3 py-2 text-sm outline-none focus:border-zinc-600 text-default disabled:opacity-60; }
  .stepper-btn { @apply h-9 w-10 rounded-xl surface-border surface-bg text-soft hover:bg-zinc-900/40 disabled:opacity-50; }

  .btn-base { @apply rounded-xl px-4 py-2 text-sm font-medium transition border disabled:opacity-50 disabled:cursor-not-allowed; }
  .btn-solid { @apply bg-accent text-on-accent border-transparent hover:opacity-90; }
  .btn-ghost { @apply bg-transparent border-zinc-800 hover:bg-zinc-900/50; }

  .page { @apply space-y-3; }
  .page-x { padding-left: var(--page-pad-x); padding-right: var(--page-pad-x); }
  .page-x-bleed {
    margin-left: calc(var(--page-pad-x) * -1);
    margin-right: calc(var(--page-pad-x) * -1);
    padding-left: var(--page-pad-x);
    padding-right: var(--page-pad-x);
  }

  .panel { @apply rounded-xl surface-border-2 bg-zinc-950/30; }
  .panel-subtle { @apply rounded-xl surface-border-2 surface-bg-subtle-2; }
  .card-subtle { @apply rounded-xl surface-border-2 surface-bg-subtle p-3; }
  .card-chip { @apply rounded-xl surface-border surface-bg-chip px-3 py-1.5; }

  .delta-up { color: rgb(var(--delta-up)); }
  .delta-down { color: rgb(var(--delta-down)); }
  .live-dot { background-color: rgb(var(--live-indicator)); }
  .live-ping { background-color: rgb(var(--live-indicator)); }
}

* { -webkit-tap-highlight-color: transparent; }

/* ---- App-like defaults + fix horizontal scroll ---- */
html, body {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

/* If your root element has an id, keep this (harmless if not present) */
#root, #app {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

/* iOS Safari: prevent weird zoom/text autosizing on rotate */
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* helps mobile "app feel" and prevents sideways bounce */
body {
  overscroll-behavior-x: none;
  touch-action: pan-y;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Minimal notch fix: keep ONLY the sticky header out of the unsafe area
   (requires viewport-fit=cover in index.html) */
header {
  padding-top: env(safe-area-inset-top);
}

/* iOS Safari: prevent auto-zoom on input focus (needs >= 16px) */
@media (max-width: 640px) {
  input,
  select,
  textarea {
    font-size: 16px !important;
    line-height: 1.25rem !important;
  }
}

button, a {
  touch-action: manipulation;
}

/* make images/long content not overflow their container */
img, svg, video, canvas {
  max-width: 100%;
  height: auto;
}

/* long names / strings won't force horizontal scrolling */
.break-anywhere {
  overflow-wrap: anywhere;
  word-break: break-word;
}

.symbol-margin-to-text {
  margin-right: 0.4rem; /* adjust */
}
